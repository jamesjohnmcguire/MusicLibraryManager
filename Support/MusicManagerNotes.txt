Music Library Manager
Music Manager	My Music Software development

Accounts
Process
	Testing

Tasks
	Log any change to media file
	Console.WriteLine
	If exact duplicate, remove, don't move
	Re-add , @" \(.*?\)" for title?
	Refactor ITunesXmlFile
	Refactor DeleteDeadTracks, into smaller testable methods
	Refactor FindDuplicates, into smaller testable methods
	AcoustID fingerprints
	Migrate custom functionality from GetAlbumFromPath
	Return filename from SaveTagsToJsonFile
	Add command line switch for UpdateLibrarySkeleton
	GetDefaultRules use FileUtils
	Don't call GetDefaultRules if rules already exist
	items.OrderBy(i => i.Name, StringComparer.Ordinal)
	SaveTagsToJsonFile, Catch json exceptions
	Refactor CreateAlbumPathFromTag to make sense, move regex to tags
	Music File Duplicates
	MusicManager, expose important current private methods as APIs
	return value for CleanFile
	Refactor private MediaFileTags tags to be parameter of specific methods 
	Write name of source when exception in SaveTagsToJsonFile
	Refactor AreFileAndTrackTheSame with better internal testing
	Optimize SaveTagsToJsonFile, so to not save if content is the same
	Fix if ((TagFile.Tag.Artists.Length > 1) || (TagFile.Tag.Performers.Length > 1))
	#pragma warning disable CS0618 // Type or member is obsolete
	TagSet property strangeness
	Keep GetFullPathObject?
	Unify all tucked away implicit rules, regex's inside private methods, etc
	Rename to more appropriate name: ConditionNotEmptyTest
	Review, Remove? UpdateTrackFromLocation	Seems unused, but contains potentially damaging functionality.  Also, it seems like it's not needed, at least in it's current state.  At the very least, refactor into smaller testable methods.
	Tests for UpdateTrackFromLocation
	Tests for UpdateItunesLocation
	Catch Exceptions from ReadAllText, IsMatch
	find	"\\s*\\(Dis[A-Za-z].*?\\)"	string
	catch	public Rules(string data) { if (!string.IsNullOrEmpty(data)) { rules = JsonConvert.DeserializeObject<IList<Rule>>(data);
	Property set method not found.
	Object of type 'System.String' cannot be converted to type 'TagLib.File'.	MusicUtility\\Rules.cs:line 78
	GetPathPartFromTag, RemoveIllegalPathCharactors Refactor
	many "* 1".* songs
	convert flac files
	https://github.com/josephw/titl
	Many almost duplicates
	Missing Artwork   Neil Young & Crazy Horse Rust Never Sleeps [320 Kbps]\AlbumArt_{5E574596-5561-4491-9CB4-3E5C7BFD6945}_Large.jpg
	System.IO.FileNotFoundException : Could not load file or assembly 'netstandard, Version=2.1.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51' or one of its dependencies. The system cannot find the file specified.
	Replace all Console.WriteLine	with logging
	Change DLL names to match the following pattern: <Company>.<Component>.dll
	Exclude non music directories
	Remove null fields from json files
	Add snapshot of each directory as csv
	Failed obtaining configuration for Common.Logging from configuration section 'common/logging'	MusicClean.exe.Config line 11
	Code analysis fixes
	Deal with wma files	ArgumentException	"Value does not fall within the expected range." IITLibraryPlaylist.AddFile(String filePath) MusicUtility.MusicUtility.UpdateItunes(FileInfo file) MusicUtility.cs:line 467 CleanFile(FileInfo file) MusicUtility.cs:line 131"
	Check IITOperationStatus status return from iTunes.LibraryPlaylist.AddFile
	Consider when the file isn't just a song, could be a medley, or a collection, and album side.  Maybe not music at all, not even audio
	Merge tags from previous libraries	?
	Check complete list of audio files	??
	Move all files when moving album files
	extended unit tests to test tag rules
	change rules to actual rules
	test remove extra tracks that point to the same file
	test updating itunes when removing duplicates
	Music5 instead of Music4
	fix "best hits of...", Compilations, Great Rock Hits lame tags
	often wrong year
	what about votes and stuff?
	mp4 file diffs almost same... same?
	deal with album artwork
	DeleteDeadTracks	set up progress monitor, if needed
	DeleteDeadTracks	// check for cancel
	DeleteDeadTracks	// increment progress
	FindDuplicates	set up progress monitor, if needed
	FindDuplicates	// check for cancel
	FindDuplicates	// increment progress
	<AppendRuntimeIdentifierToOutputPath>false</AppendRuntimeIdentifierToOutputPath>
	dotnet build SourceCode\MusicManager.sln Fails	Most notably because of no support for COMReference task.  Net Core doesn't seem like it is going to address this anytime soon.
	MediaFileTags.cs(137,5): Trim analysis warning IL2075: DigitalZenWorks.MusicToolKit.MediaFileTags.TagSet.get: 'this' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicProperties' in call to 'System.Type.GetProperties()'. The return value of method 'System.Object.GetType()' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	MediaFileTags.cs(144,6): Trim analysis warning IL2075: DigitalZenWorks.MusicToolKit.MediaFileTags.TagSet.get: 'this' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicProperties' in call to 'System.Type.GetProperty(String)'. The return value of method 'System.Object.GetType()' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	MusicManager.cs(47,4): Trim analysis warning IL2072: DigitalZenWorks.MusicToolKit.MusicManager.MusicManager(): '#0' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicParameterlessConstructor' in call to 'System.Activator.CreateInstance(Type)'. The return value of method 'System.Runtime.InteropServices.Marshal.GetTypeFromCLSID(Guid)' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	Rule.cs(253,7): Trim analysis warning IL2075: DigitalZenWorks.MusicToolKit.Rule.GetFullPathObject(Object,String): 'this' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicProperties' in call to 'System.Type.GetProperty(String)'. The return value of method 'System.Object.GetType()' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	Rule.cs(277,4): Trim analysis warning IL2075: DigitalZenWorks.MusicToolKit.Rule.GetItemSubject(Object,String): 'this' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicProperties' in call to 'System.Type.GetProperty(String)'. The return value of method 'System.Object.GetType()' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	Rule.cs(313,4): Trim analysis warning IL2075: DigitalZenWorks.MusicToolKit.Rule.SetItemSubject(Object,String,Object): 'this' argument does not satisfy 'DynamicallyAccessedMemberTypes.PublicProperties' in call to 'System.Type.GetProperty(String)'. The return value of method 'System.Object.GetType()' does not have matching annotations. The source value must declare at least the same requirements as those declared on the target location it is assigned to.
	ILLink : Trim analysis warning IL2026: System.Data.DataSet.System.Xml.Serialization.IXmlSerializable.GetSchema(): Using member 'System.Data.DataSet.WriteXmlSchema(DataSet,XmlWriter)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataSet.GetSchema uses TypeDescriptor and XmlSerialization underneath which are not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	ILLink : Trim analysis warning IL2026: System.Data.DataSet.System.Xml.Serialization.IXmlSerializable.ReadXml(XmlReader): Using member 'System.Data.DataSet.ReadXmlSerializableInternal(XmlReader)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataSet.ReadXml uses XmlSerialization underneath which is not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	ILLink : Trim analysis warning IL2026: System.Data.DataSet.System.Xml.Serialization.IXmlSerializable.WriteXml(XmlWriter): Using member 'System.Data.DataSet.WriteXmlInternal(XmlWriter)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataSet.WriteXml uses XmlSerialization underneath which is not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	ILLink : Trim analysis warning IL2026: System.Data.DataTable.System.Xml.Serialization.IXmlSerializable.GetSchema(): Using member 'System.Data.DataTable.GetXmlSchema()' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataTable.GetSchema uses TypeDescriptor and XmlSerialization underneath which are not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	ILLink : Trim analysis warning IL2026: System.Data.DataTable.System.Xml.Serialization.IXmlSerializable.ReadXml(XmlReader): Using member 'System.Data.DataTable.ReadXmlSerializableInternal(XmlReader)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataTable.ReadXml uses XmlSerialization underneath which is not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	ILLink : Trim analysis warning IL2026: System.Data.DataTable.System.Xml.Serialization.IXmlSerializable.WriteXml(XmlWriter): Using member 'System.Data.DataTable.WriteXmlInternal(XmlWriter)' which has 'RequiresUnreferencedCodeAttribute' can break functionality when trimming application code. DataTable.WriteXml uses XmlSerialization underneath which is not trimming safe. Members from serialized types may be trimmed if not referenced directly.
	warning IL2104: Assembly 'Common.Logging' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries
	warning IL2104: Assembly 'CSCore' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries
	warning IL2104: Assembly 'Newtonsoft.Json' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries
	warning IL2104: Assembly 'Serilog' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries 
	warning IL2104: Assembly 'TagLibSharp' produced trim warnings. For more information see https://aka.ms/dotnet-illink/libraries

	Finished
		clean up usings
		Update all Log.Error(CultureInfo.InvariantCulture, m => m(
		MusicManager(libraryLocation)
		Move iTunes related functionality to its own class
		Warning	CA1031	Modify 'UpdateItunesLocation' to catch a more specific allowed exception type, or rethrow the exception	DigitalZenWorks.MusicToolKit	DigitalZenWorks.MusicToolKit\MusicManager.cs	748	Active
		Warning	CA1031	Modify 'UpdateTrackFromLocation' to catch a more specific allowed exception type, or rethrow the exception	DigitalZenWorks.MusicToolKit	DigitalZenWorks.MusicToolKit\MusicManager.cs	815	Active
		Message	IDE0220	'foreach' statement implicitly converts 'object' to 'System.Text.RegularExpressions.Match'. Add an explicit cast to make intent clearer, as it may fail at runtime	DigitalZenWorks.MusicToolKit	DigitalZenWorks.MusicToolKit\MediaFileTags.cs	357	Active
		Message	IDE0220	'foreach' statement implicitly converts 'object' to 'System.Text.RegularExpressions.Match'. Add an explicit cast to make intent clearer, as it may fail at runtime	DigitalZenWorks.MusicToolKit	DigitalZenWorks.MusicToolKit\MediaFileTags.cs	357	Active
		Message	IDE0220	'foreach' statement implicitly converts 'object' to 'System.Text.RegularExpressions.Match'. Add an explicit cast to make intent clearer, as it may fail at runtime	DigitalZenWorks.MusicToolKit	DigitalZenWorks.MusicToolKit\MediaFileTags.cs	357	Active
		Warning	NU1701	Package 'BouncyCastle 1.8.9' was restored using '.NETFramework,Version=v4.6.1, .NETFramework,Version=v4.6.2, .NETFramework,Version=v4.7, .NETFramework,Version=v4.7.1, .NETFramework,Version=v4.7.2, .NETFramework,Version=v4.8, .NETFramework,Version=v4.8.1' instead of the project target framework 'net6.0-windows7.0'. This package may not be fully compatible with your project.	DigitalZenWorks.MusicToolKit.Tests	DigitalZenWorks.MusicToolKit.Tests\DigitalZenWorks.MusicToolKit.Tests.csproj	1	
		Rename skeleton methods
		Change skeleton to tagSet
		ITunesFolderLocation / ITunesDirectoryLocation
		Conditional check for existence of iTunesLib, before using everywhere
		Tests for GetRuleByName
		Tests for IsConditionMet
		Tests for GetConditionalValue
		Test ConditionRegexMatch
		Test ConditionEqualsTest
		Test ConditionNotEqualsTest
		Test CheckNextRule
		Test Action
		Test RegexReplace
		Test GetItemSubject
		Test SetItemSubject
		Test ConditionNotEmptyTest
		Tests for Rule.Run
		Test for GetObjectBaseElement, with one segment, with multiple segments, empty string
		Add tests for UpdateItunes
		Add tests for UpdateFile, same and different
		Tests fir GetDulicateLocation
		Tests for CreateArtistPathFromTag, same as above
		Test for CreateAlbumPathFromTag, basic
		AreFileAndTrackTheSame, tests for if they are the same and another test if they are different
		Is OrderedContractResolver being used? necessary?
		catch in ITunesXmlFile
		Fix updated in Update
		Make test for SaveTagsToJsonFile
		What if com component doesn't exist?
		Check for existence of iTunesLib
		Test ITunesFolderLocation when valid, when null
		Test LoadItunesXmlFile for valid return 
		Test LoadItunesXmlFile when invalid
		MusicManager, Test if rules exist
		Test ITunesXmlFile when not xml file
		Test ITunesXmlFile when existing file
		Test ITunesXmlFile when not existing file
		Tests for Update, copy all from above
		Tests for Update, no change
		Tests for Update, change album, change artist, change title
		Instance tests for AlbumRemoveCd, AlbumRemoveDisc, 
		Return same value if not different in RegexRemove
		Catch exceptions in RegexRemove
		Add bad values test for RegexRemove
		Add no change test for AlbumRemoveCd
		Add tests for AlbumReplaceCurlyBraces
		Add tests for AlbumRemoveDisc
		exception	{"Data at the root level is invalid. Line 1, position 1."}	System.Exception {System.Xml.XmlException}	MusicUtility\\ITunesXmlFile.cs:line 41
		MSB4019: The imported project "C:\Program Files\dotnet\sdk\5.0.101\Microsoft\VisualStudio\v16.0\TextTemplating\Microsoft.TextTemplating.targets" was not found. Confirm that the expression in the Import declaration "C:\Program Files\dotnet\sdk\5.0.101\\Microsoft\VisualStudio\v16.0\TextTemplating\Microsoft.TextTemplating.targets" is correct, and that the file exists on disk.
		error NETSDK1095: Optimizing assemblies for performance is not supported for the selected target platform or architecture. Please verify you are using a supported runtime identifier, or set the PublishReadyToRun property to false. VersionUpdate\VersionUpdate.csproj]
		MSB4803: The task "ResolveComReference" is not supported on the .NET Core version of MSBuild. Please use the .NET Framework version of MSBuild. See https://aka.ms/msbuild/MSB4803 for further details. MusicUtility\MusicUtility.csproj
		C:\Program Files\dotnet\sdk\5.0.101\Sdks\Microsoft.NET.Sdk\targets\Microsoft.PackageDependencyResolution.targets(241,5): error NETSDK1004: Assets file 'MusicUtility\obj\project.assets.json' not found. Run a NuGet package restore to generate this file. MusicUtility\MusicUtility.csproj
		FileNotFoundException : Could not load file or assembly 'netstandard, Version=2.1.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51' or one of its dependencies. The system cannot find the file specified.
		MusicLibraryManager\SourceCode\MusicClean\MusicClean.csproj(21,2): error MSB4019: The imported project "C:\Program Files\dotnet\sdk\5.0.101\Microsoft\VisualStudio\v16.0\TextTemplating\Microsoft.TextTemplating.targets" was not found. Confirm that the expression in the Import declaration "C:\Program Files\dotnet\sdk\5.0.101\\Microsoft\VisualStudio\v16.0\TextTemplating\Microsoft.TextTemplating.targets" is correct, and that the file exists on disk.
		MSB4803: The task "ResolveComReference" is not supported on the .NET Core version of MSBuild. Please use the .NET Framework version of MSBuild. See https://aka.ms/msbuild/MSB4803 for further details. [MusicUtility\MusicUtility.csproj]
		Project '..\MusicUtility\MusicUtility.csproj' targets 'net5.0-windows'. It cannot be referenced by a project that targets '.NETCoreApp,Version=v5.0'.	MusicClean
		NUnit.Engine.NUnitEngineException : An exception occurred in the driver while loading tests.  ----> System.IO.FileNotFoundException : Could not load file or assembly 'MusicUtility.Tests, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'. The system cannot find the file specified.
		Warning	MSB3243	No way to resolve conflict between "System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" and "System.Web". Choosing "System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" arbitrarily.	MusicUtility	C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\Microsoft.Common.CurrentVersion.targets	2203	
		https://github.com/jamesjohnmcguire/MusicLibraryManager/security/dependabot/SourceCode/MusicClean/packages.config/log4net/open
		Add build command, complete with running unit tests
		SourceCode\DevelopmentTools\Commands\build.cmd Fails	References SourceCode\.build directory which doesn't exist
		Stop hyper version updating
		MSB3030: Could  not copy the file "NUnitTestDebugger\app.config" because it was not found.
		MSB6004: The specified task executable location "MusicLibraryManager\SourceCode\packages\NUnit.ConsoleRunner.\tools\nunit3-console.exe" is invalid.
		Remove sample projects
		mvhd box not found.	TagLib.CorruptFileException}
		iTunesLib.IITLibraryPlaylist.AddFile	Value does not fall within the expected range.
		Property set method not found.
		Formatting.Indented
		Frame data incomplete.	TagLib.CorruptFileException
		Error getting value from 'ReadTimeout' on 'System.IO.FileStream'.
		extract tags into xml files, for backup purposes
		System.UnauthorizedAccessException	Access to the path 'C:\\Users\\JamesMc\\Data\\External\\Entertainment\\Automatically Add to iTunes' is denied.
		FileNotFoundException: Could not load file or assembly 'System.Configuration.ConfigurationManager, Version=0.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51'. The system cannot find the file specified.
		System.Reflection.TargetException	Object does not match target type.
		Retrieving the COM class factory for component with CLSID {DC0C2640-1415-4644-875C-6F4D769839BA} failed due to the following error: 80080005 Server execution failed (Exception from HRESULT: 0x80080005 (CO_E_SERVER_EXEC_FAILURE)).
		Exception from HRESULT: 0xA0040203
		Remove track number from file names
		Remove [MFSL UDCD 675] type of junk from file names
		extra directories	Music\\Flac\\Burt Bacharach\\20th Century Masters The Millennium Collection The Best Of Burt Bacharach"
		(Disc 2)
		logging
		add code analysis
		make	public class Tags	Disposable
		unit tests
		review code files
		directory depth
		title case
		Music\\Idina Menzel - Let It Go (Frozen OST) Single 320 kbps\\Idina Menzel - Let It Go (Frozen OST) Single 320 kbps.mp3
		deal with ' - ' split rules
		remove dead tracks
		InnerException	{"Timeouts are not supported on this stream."}	System.Exception {System.InvalidOperationException}
		Newtonsoft.Json.JsonSerializationException Timeouts are not supported on this stream.
		https://stackoverflow.com/questions/30331027/newtonsoft-json-net-how-to-serialize-content-of-a-stream
		"Frame data incomplete."	TagLib.CorruptFileException
		https://github.com/mono/taglib-sharp/issues/192
		error MSB4019: The imported project MusicLibraryManager\SourceCode\.build\MSBuild.Community.Tasks.Targets" was not found. Confirm that the expression in the Import declaration\SourceCode\.build\MSBuild.Community.Tasks.Targets" is correct, and that the file exists on disk.
		error MSB4126: The specified solution configuration "Release|x64" is invalid. Please specify a valid solution configuration using the Configuration and Platform properties (e.g. MSBuild.exe Solution.sln /p:Configuration=Debug /p:Platform="Any CPU") or leave those properties blank to use the default solution configuration.
		Warning	NU1702	ProjectReference SourceCode\MusicUtility\MusicUtility.csproj was resolved using '.NETFramework,Version=v4.8' instead of the project target framework '.NETCoreApp,Version=v5.0'. This project may not be fully compatible with your project.	MusicUtilitiesTests
		error NETSDK1047: Assets file 'MusicClean\obj\project.assets.json' doesn't have a target for 'net48/win7-x86'. Ensure that restore has run and that you have included 'net48' in the TargetFrameworks for your project. You may also need to include 'win7-x86' in your project's RuntimeIdentifiers. MusicClean\MusicClean.csproj]
		error NETSDK1047: Assets file  doesn't have a target for 'net48/win7-x86'. Ensure that restore has run and that you have included 'net48' in the TargetFrameworks for your project.
		NUNIT3 : error : no inputs specified MusicLibraryManager\SourceCode\DevelopmentTools\Commands\MusicLibrary.msbuild.xml
		System.Runtime.InteropServices.COMException : Retrieving the COM class factory for component with CLSID {DC0C2640-1415-4644-875C-6F4D769839BA} failed due to t he following error : 80080005 Server execution failed (Exception from HRESULT: 0x80080005 (CO_E_SERVER_EXEC_FAILURE)). SourceCode\DevelopmentTools\Commands\MusicLibrary.msbuild.xml
		Invalid : MusicUtility\MusicUtilityTests\Bin\x86\Release\netcoreapp2.2\MusicUtility.Tests.dll  File not found: SourceCode\MusicUtility\MusicUtilityTests\Bin\x86\Release\netcoreapp2.2\MusicUtility.Tests.dll
		Invalid : C:\Microsoft\Xamarin\NuGet\nunit\3.12.0\lib\netstandard2.0\nunit.framework.dll .NETStandard test assemblies are not supported by this version of the engine
		Invalid : MusicUtility\MusicUtilityTests\Bin\x86\Release\MusicUtility.Tests.dll File not found: SourceCode\MusicUtility\MusicUtilityTests\Bin\x86\Release\MusicUtility.Tests.dll
		Invalid : C:\Microsoft\Xamarin\NuGet\nunit\3.12.0\lib\netstandard2.0\nunit.framework.dll .NETStandard test assemblies are not supported by this version of the engine
		Invalid : MusicLibraryManager\SourceCode\Bin\x86\Release\MusicUtility.Tests.dll File not found: MusicLibraryManager\SourceCode\Bin\x86\Release\MusicUtility.Tests.dll
		error :  MusicLibraryManager\SourceCode\DevelopmentTools\Commands\MusicLibrary.msbuild.xml NUnit.Engine.NUnitEngineException : The NUnit 3 driver encountered an error while executing reflected code.	System.InvalidCastException : Unable to cast transparent proxy to type 'System.Web.UI.ICallbackEventHandler'
		Inner Exception 1: ConfigurationException: Failed obtaining configuration for Common.Logging from configuration section 'common/logging'.
		Inner Exception 2: FileNotFoundException: Could not load file or assembly 'System.Configuration.ConfigurationManager, Version=0.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51'. The system cannot find the file specified.
		Warning	NU1702	ProjectReference MusicUtility\MusicUtility.csproj was resolved using '.NETFramework,Version=v4.8' instead of the project target framework '.NETCoreApp,Version=v5.0'. This project may not be fully compatible with your project.	MusicClean	C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\Microsoft.Common.CurrentVersion.targets	1662
		NU1702 ProjectReference csproj was resolved using '.NETFramework,Version=v4.8' instead of the project target framework '.NETCoreApp,Version=v5.0'. This project may not be fully compatible with your project.	MusicClean	C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Current\Bin\Microsoft.Common.CurrentVersion.targets	1662
	Not Sure
		1-05 Do You Know The Way To San Jose.m4a
		Tangled Up In Blue (2).mp3
		Guy Cabay & Toots Thielemans & Philip Catherine
		Brussels Jazz Rally
		Compilations\\P.S. I Love You\\Everything We Had.mp3
		Really Gonna Rock Tonight - 30 Great Rock Hits (disc 1)
		More Songs About Buildings And Food {2005 Remaster}\\Thank You For Sending Me An Angel (Country Angel Version).m4a
Design
	Process
		Overall
			get music library location
			for each folder
				for each file
					Update tags (inside file)
					Update file information
						Update directory
						Update file name
					Update iTunes
				Fix file name, if needed
	Process Flow
		CleanFiles
			UpdateArtistLocation
			//UpdateAlbumDirectory
			CleanFile
				tags = new Tags(file.FullName);
				//CleanFileName
				//	CleanTrackNumbersOutOfFileName
				IITTrackCollection = GetTracksFromFileName
					IITTrackCollection playList.Search
					foreach
						AreFileAndTrackTheSame
						// TODO update based on tags
						MoveFileBasedOnTags
							File.Move
						UpdateLocation
							fileTrack.Location = filePath;
					MoveFileBasedOnTags
						File.Move
					iTunes.LibraryPlaylist.AddFile
				MoveFileBasedOnTags(file);
						File.Move
				iTunes.LibraryPlaylist.AddFile(track);
	if song ends with ' \d'
		check if song exists without ' \d'
		if song exists
			check if the same
			if same
				delete song with ' \d'
				adjust itunes playlist, as needed
		else
			rename song
			adjust itunes playlist, as needed
	Rules
		when the artist tag is 'various artists' and the performers tag not empty and the performers tag is not 'various artists', replace the artist tag with the performers tag

		if	artist is 'various artists' and
			performers not empty and
			performers is not 'various artists'
				replace the artist tag with the performers tag

		https://www.pluralsight.com/courses/patterns-library

		If someObject is Pumpkin replace (change?) with Pie
			  1       2  3       4                      5

		If someObject is Pumpkin AND someOject is Ripe replace (change?) with Pie
			  1       2  3       6                     4                      5

		If someObject is Pumpkin AND someOject is Ripe replace (change?) with Pie AND serve
			  1       2  3       6                     4                      5   7

		1	item
			subject
		2	condition
		3	conditional
		4	operation
		5	replacement
		6	chain
		7	chain

					  equal
		If someObject is of type Pumpkin AND someOject has property Ripe replace (change?) with Pie
		   1          2  subject 3       6             subject           4                      5

		If someObject artistProperty has value equal 'various artists' replace artistPropertyValue with performersPropertyValue

		Remove subject as parameter as it is already a property
	CleanFile
		Tags.Update
			rules.RunRules
				foreach (PropertyInfo property in properties)
					foreach (Rule rule in rules)
						object newValue = rule.Run(item, fullName, source, null);
	Album	"The Very Best Of 10cc"
		Rule1 (album / disks)
		Rule2 (artist / various artists)
	will need to specify whether to ignore case sensitivity or not in rules	for that matter, whether ordinal values matter or not
	handle actions if no more rules chained
	Need to fix replacement, especially as a property.
	Get other unit test in line with new approach
Notes
	FileTypes
		.aifc		Apple
		.alac	lossless	Apple Lossless Audio Codec
		.flac	lossless	Not supported in iTunes
		.m3u
		.m4a	lossless
		.mp3
		.wav	Not supported in iTunes
		.wma	Not supported in iTunes
	Locations
		C:\Users\JamesMc\Music\iTunes
		C:\Users\JamesMc\AppData\Roaming\Apple Computer\iTunes	Not changed for quite a while
		C:\Users\JamesMc\AppData\Local\Apple Computer\iTunes	Not changed for quite a while
		C:\Users\JamesMc\Data\External\Entertainment
		C:\Users\JamesMc\Data\External\Entertainment\Videos\Movies
		ITunes info	C:\Users\JamesMc\Music\iTunes	Not changed for quite a while
		iTunes.LibraryXMLPath = "C:\\Users\\JamesMc\\Music\\iTunes\\iTunes Music Library.xml"
		iTunesDirectoryLocation	ItunesXmlFile.ITunesFolderLocation	"C:\\Users\\JamesMc\\Data\\External\\Entertainment\\"

		C:\Users\JamesMc\Data\External\Entertainment\Music\iTunes Media
		C:\Users\JamesMc\AppData\Roaming\Apple Computer\Preferences
		C:\Users\JamesMc\AppData\Local\Apple Computer\iTunes
		HKEY_LOCAL_MACHINE\SOFTWARE\Apple Computer, Inc.\iTunes
		HKEY_CURRENT_USER\SOFTWARE\Apple Computer, Inc.\iTunes\Preferences
		Change Location
			Attempt1
				Start with empty Entertainment directory, empty Entertainment\Music directory.  C:\Users\JamesMc\Music\iTunes using iTunes Library-61aefff9.itl
					C:\Users\JamesMc\Data\External\Entertainment\Music\iTunes Media
		Files
			C:\\Users\\JamesMc\\Music\\iTunes\\iTunes Music Library.xml"
	Repositories
		github  https://github.com/jamesjohnmcguire/MusicLibraryManager.git (push)
		origin  https://jamesjohnmcguire@bitbucket.org/jamesjohnmcguire/MusicLibraryManager.git (fetch)
	Manual Renaming
		C:\\Users\\JamesMc\\Data\\External\\Entertainment\\Music\\
			FunkSoul\\ABC (Love Stream Mix By Kayoko Kimura Feat. Fireflys).wma
		Soul Source Jackson 5 Remixes 
		ABC (Love Stream Mix) Featuring Fireflys and Kimura Kayoko 
		The Jackson 5 (Soul Source, 2000)
	Source Code notes
		TagSet based on public abstract class Tag
	Snippets
		//IITEncoder encoder = iTunes.CurrentEncoder;
		//status = iTunes.ConvertFile2(musicFilePath);
	Rules
		if (propertyInfo.PropertyType.IsArray)
		{
			Array a = (Array)propertyInfo.GetValue(item);
			Array b = (Array)propertyInfo.GetValue(item, null);
			var tester = propertyInfo.GetValue(item);
			var tester2 = propertyInfo.GetValue(item, null);
			object[] test = (object[])propertyInfo.GetValue(item);
			object[] test1 = (object[])propertyInfo.GetValue(item, null);
			string[] test2 = (string[])propertyInfo.GetValue(item, null);
			// var test3 = propertyInfo.GetValue(item, new object[] { 1 });
			itemSubject = propertyInfo.GetValue(item, null);
		}
	Database
		File
			id
			Path
			Name
			Type
			SomethingId	like recording
		Deriviation	like Rip
			id
			originalId
		Compiliation	basically like a published recording or song from a cd
			id
			songName
			albumName
			artistName
		split up fragments into separate files
		create tag database
			Songs
				id
				filename
			Tags
				id
				Tag
			SongFragmentTags
				id
				tagId
				songId
		tag all songs
		Resources
			https://musicbrainz.org/doc/MusicBrainz_Picard
				$if2(%albumartist%,%artist%)/%album%/$if($gt(%totaldiscs%,1),%discnumber%-,)$num(%tracknumber%,2)$if(%compilation%, %artist% -,) %title%
		TagFile	A file with tags
			AudioTagFile
				MusicTagFile
					Song
Issues
	Duplicate files (exact)
		DoubleKiller.exe
		easy .net method
	Duplicate files (nearly identical - different metadata)
		need to find some examples
		go through some test cases
	Duplicate files (nearly identical - based off same original, different rips)
		need to find some examples
		compare
		choose better based off of sample rate, length, review
	Duplicate files (different originals)
		need to find some examples
		compare
		keep both?
		keep preferred
	bad file names	ex: track 5
		easy .net method
	file names	track number in front
		easy .net method
	Songs not put in their artist directory
	various artists, compilations
		remove compilation flag
		move to proper folder
	skips in files
		replace
	missing tracks in iTunes
		re-add to iTunes
	lost iTunes data (Play counts, rating, PlayLists)
		fix xml file
	random named artwork
		identify and move to proper place
	artwork not placed in correct folder
		identify and move to proper place
	top level sometimes contains album specific folder, as opposed to just performer info.
		identify and move to proper place
	add support for art work and such
	link compilations
	(Disk 2)
	remove begin and ending symbols such as _
	often wrong year
	what about votes and stuff?
	System.Web
		Warning	MSB3245	Could not resolve this reference. Could not locate the assembly "System.Web". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors.	MusicUtility
		https://docs.microsoft.com/en-us/dotnet/api/system.net.webutility?view=netstandard-2.0
	c# .net5 HttpUtility
		https://stackoverflow.com/questions/32434401/replacement-for-system-web-httputility-urlencode-urldecode-asp-net-5
		https://stackoverflow.com/questions/64991233/net-5-using-system-web-reference-assemblies-should-not-be-loaded-for-execut
Resources
	Rules
		https://stackoverflow.com/questions/208659/looking-for-simple-rules-engine-library-in-net
		https://cgeers.wordpress.com/2008/01/26/using-rules-outside-of-a-workflow/
		https://www.codeproject.com/Articles/19768/Flee-Fast-Lightweight-Expression-Evaluator
		https://archive.codeplex.com/?p=rulesengine
		https://stackoverflow.com/questions/424366/string-representation-of-an-enum
		https://www.codeguru.com/csharp/csharp/cs_syntax/reflection/article.php/c5885/Using-Reflection-to-Dump-Objects.htm
		http://geekswithblogs.net/shahed/archive/2008/07/24/123998.aspx
		https://www.infoq.com/articles/Rule-Engines/
		https://en.wikipedia.org/wiki/Command_pattern
		https://www.informit.com/articles/article.aspx?p=1398607&seqNum=2
		https://softwareengineering.stackexchange.com/questions/323018/business-rules-design-pattern
		rule pattern
		https://www.pluralsight.com/courses/patterns-library
		https://github.com/mwhelan/Blog_RulesPattern

		https://tenmilesquare.com/basic-rules-engine-design-pattern/
		https://yiniski.medium.com/rule-engine-pattern-8a3f0e0c2d81

		https://nrules.net/
		https://www.google.com/search?q=rule+pattern&oq=rule+pattern&aqs=chrome..69i57j0l4j0i22i30l3.5132j0j15&sourceid=chrome&ie=UTF-8
	https://github.com/filoe/cscore
	Tags
		http://stackoverflow.com/questions/1750464/how-to-read-and-write-id3-tags-to-an-mp3-in-c
		Tag stats	https://kworb.net/faq.html
		Tagging info
			http://id3.org/id3v2.4.0-frames
			https://taglib.org/api/
			https://www.blisshq.com/music-library-management-blog/2010/10/12/how-to-use-album_artist/
		Libraries
			https://github.com/mono/taglib-sharp	https://www.nuget.org/packages/TagLibSharp
			Alternate Tagging libraries
				Audio Tools Library (ATL) for .NET	https://github.com/Zeugma440/atldotnet
		MusicBrainz
			music tag original album
				https://community.metabrainz.org/t/plugin-tag-first-recorded-date/187175/8
				https://picard.musicbrainz.org/docs/development/
			https://community.metabrainz.org/t/newbie-here-picard-seems-to-be-prefering-tags-other-than-the-original-release/89554/3
		extract tagsinto other file
			http://meta-extractor.sourceforge.net/
			https://sourceforge.net/projects/meta-extractor/files/
			https://github.com/DIA-NZ/Metadata-Extraction-Tool
			https://www.codeproject.com/Articles/11175/Extracting-Tags-and-Details-from-Your-MP3-Collecti
		music database
			https://github.com/metabrainz/musicbrainz-server/tree/master/admin/sql
			https://musicbrainz.org/doc/MusicBrainz_Database/Schema

			https://en.wikipedia.org/wiki/List_of_online_music_databases
		AcoustID fingerprints
			https://github.com/acoustid/chromaprint
			https://github.com/wo80/AcoustID.NET
			https://oxygene.sk/2011/01/how-does-chromaprint-work/
	c# itunes api
		http://www.joshkunz.com/iTunesControl/
		http://www.joshkunz.com/iTunesControl/interfaceIITTrackCollection.html
		http://www.joshkunz.com/iTunesControl/interfaceIITTrack.html
		http://stackoverflow.com/questions/2966992/where-is-itunes-sdk-api-documentation
		https://blogs.msdn.microsoft.com/noahc/2006/07/06/automating-itunes-with-c-in-net/
		https://www.google.com/#q=c%23+iTunes
		http://www.hanselman.com/blog/RemovingDeadTracksDuplicatesThatDontExistFromITunesUsingC.aspx
		http://stackoverflow.com/questions/14352575/itunes-development-in-c-sharp
		http://www.codeproject.com/Articles/12369/Accessing-songs-and-playlists-from-ITunes-using-C
		https://ratnakarg.wordpress.com/tag/c-itunes-sdk/
		https://www.google.com/#q=c%23%20itunes%20get%20track%20by%20file%20filenames
		http://stackoverflow.com/questions/4834419/itunes-com-how-to-get-tracks-old-location-with-c
		http://stackoverflow.com/questions/33849246/itunes-com-sdk-how-to-remove-lyrics
		https://taglib.github.io/api/annotated.html
		http://www.mcelhearn.com/how-to-play-flac-or-other-lossless-audio-files-in-itunes/
		http://www.codeproject.com/Articles/501521/How-to-convert-between-most-audio-formats-in-NET
		https://naudio.codeplex.com/
		https://github.com/naudio/NAudio
		http://coppertino.com/vox/resources/how-convert-flac-apple-lossless
		http://geekswithblogs.net/PearlFactory/archive/2011/11/23/convert-mp3-to-aacflac-to-aac-or-any-other-combination.aspx
		https://musicbrainz.org/doc/Beginners_Guide
	iTunes
		http://www.mcelhearn.com/how-to-rebuild-your-itunes-library/
		https://support.apple.com/en-us/HT201596
		http://www.mcelhearn.com/how-to-rebuild-your-itunes-library/
		http://samsoft.org.uk/iTunes/scripts.asp
		http://www.everythingitunes.com/os/windows/category/scripts/
		http://dougscripts.com/itunes/itinfo/windowshelp.php
	Xml
		http://stackoverflow.com/questions/55828/how-does-one-parse-xml-files
		https://github.com/mercury2269/ITunesManager

		http://www.hanselman.com/blog/RemovingDeadTracksDuplicatesThatDontExistFromITunesUsingC.aspx
		https://blogs.msdn.microsoft.com/noahc/2006/07/06/automating-itunes-with-c-in-net/
	Packages
		https://github.com/JamesNK/Newtonsoft.Json
	http://regexstorm.net/tester
	https://www.sno.phy.queensu.ca/~phil/exiftool/#running
	https://ils.unc.edu/callee/temp-dc-tools/extract-metadata.htm
	QuickTime Decrypt Library	https://github.com/gitpan/Audio-M4P
	https://github.com/jiixyj/loudness-scanner
	GooglePlayMusic
		https://support.google.com/googleplaymusic/answer/1075570?hl=en
	Unit Testings
		https://github.com/nunit/nunit/issues/2480
		nuget install NUnit.Console -ExcludeVersion -OutputDirectory tools
		https://docs.nunit.org/articles/nunit/getting-started/dotnet-core-and-dotnet-standard.html
		https://alteridem.net/2017/05/04/test-net-core-nunit-vs2017/
	Locations
		https://www.davidlimonline.com/blog/2019/5/1/cant-change-the-itunes-media-folder-location-try-creating-a-new-itunes-library
New
	c# regex replace backets
		https://stackoverflow.com/questions/26984428/how-to-replace-a-matched-group-value-with-regex/26984540
	/MusicUnprocessed/Inbox/Talking Heads - Brick (2005) [FLAC] {8 DualDisc Remasters Boxset}/R-1570556-1229475368.jpg
	UrlDecode
		Before UrlDecode
			"file://localhost/C:/Users/JamesMc/Data/External/Entertainment/Music/iTunes%20Media/Music/iTunes%20Media/Music/Aaron%20Goldberg/Worlds/1-07%20OAM's%20Blues%201.m4a"
		After UrlDecode
			"file://localhost/C:/Users/JamesMc/Data/External/Entertainment/Music/iTunes Media/Music/iTunes Media/Music/Aaron Goldberg/Worlds/1-07 OAM's Blues 1.m4a"	string
	iTunes
		C:\Users\JamesMc\AppData\Local\Apple Computer\iTunes
		C:\Users\JamesMc\AppData\Roaming\Apple Computer\Preferences\com.apple.iTunes.plist
		C:\Users\JamesMc\AppData\Roaming\Apple Computer\iTunes
	Music Manager
		"C:\\Users\\JamesMc\\Data\\External\\iTunes Media\\"
		"C:\\Users\\JamesMc\\Data\\External\\iTunes Library.xml"
		CALL dotnet publish --configuration Release --runtime win-x64 --self-contained true -p:PublishReadyToRun=true -p:PublishSingleFile=true --output Binaries\Windows

		C:\Program Files\dotnet\sdk\6.0.200\Sdks\Microsoft.NET.Sdk\targets\Microsoft.NET.RuntimeIdentifierInference.targets(150,5): error NETSDK1031: It is not supported to build or publish a self-contained application without specifying a RuntimeIdentifier. You must either specify a RuntimeIdentifier or set SelfContained
		to false. [C:\Users\JamesMc\Data\Clients\DigitalZenWorks\MusicLibraryManager\So
		urceCode\MusicManager\MusicManager.csproj]
	Music Manager
		soundcharts.com
		muckrack.com
		Spotify API dashboard
		Apple Music / iTunes / 
		Deezer
	Catch Exceptions from ReadAllText, IsMatch
		https://docs.microsoft.com/en-us/dotnet/api/system.io.file.readalltext?f1url=%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(System.IO.File.ReadAllText)%3Bk(DevLang-csharp)%26rd%3Dtrue&view=net-6.0
		https://docs.microsoft.com/en-us/dotnet/api/system.text.regularexpressions.regex.ismatch?f1url=%3FappId%3DDev16IDEF1%26l%3DEN-US%26k%3Dk(System.Text.RegularExpressions.Regex.IsMatch)%3Bk(DevLang-csharp)%26rd%3Dtrue&view=net-6.0
	Removed Regix, place back in at appropriate place
			string pattern = @"\.{2,}";

			if (Regex.IsMatch(albumTag, pattern))
			{
				// Remove 2 or more dots from abulm part.
				albumTag = Regex.Replace(albumTag, pattern, string.Empty);
			}
